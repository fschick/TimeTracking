<div [class]="mergedConfig.cssWrapper">
  <table [class]="mergedConfig.cssTable">
    <thead>
    <ng-container *ngTemplateOutlet="mergedConfig.headRowTemplate ? mergedConfig.headRowTemplate : defaultHeadRowTemplate; context: {columns: columns}"></ng-container>
    </thead>
    <tbody>
    <ng-container *ngTemplateOutlet="mergedConfig.filterRowTemplate ? mergedConfig.filterRowTemplate : defaultFilterRowTemplate; context: {columns: columns}"></ng-container>
    <ng-container *ngTemplateOutlet="mergedConfig.dataRowTemplate ? mergedConfig.dataRowTemplate : defaultDataRowTemplate; context: {columns: columns}"></ng-container>
    </tbody>
    <tfoot>
    <ng-container *ngTemplateOutlet="mergedConfig.footRowTemplate ? mergedConfig.footRowTemplate : defaultFooterRowTemplate; context: {columns: columns}"></ng-container>
    </tfoot>
  </table>
</div>

<ng-template #defaultHeadRowTemplate let-columns="columns">
  <tr [class]="mergedConfig.cssHeadRow">
    <th *ngFor="let column of columns;"
        [ngClass]="[mergedConfig.cssHeadCell, getCssHeadCell(column), getCssSortEnabled(column)]"
        [style]="getColumnWidth(column)"
        (click)="applySortOrder(column)"
        scope="col">
      <ng-container *ngTemplateOutlet="column.headCellTemplate ? column.headCellTemplate : defaultHeadCellTemplate; context: {column: column}"></ng-container>
    </th>
  </tr>
</ng-template>

<ng-template #defaultFilterRowTemplate let-columns="columns">
  <tr *ngIf="mergedConfig.filterRow">
    <td
      *ngFor="let column of columns;"
      [ngClass]="[mergedConfig.cssFilterCell, getCssFilterCell(column)]"
      [style]="getColumnWidth(column)">
      <ng-container *ngIf="column.filterable !== 'no'">
        <ng-container *ngTemplateOutlet="column.filterCellTemplate ? column.filterCellTemplate : defaultFilterCellTemplate; context: getFilterTemplateContext(column)"></ng-container>
      </ng-container>
    </td>
  </tr>
</ng-template>

<ng-template #defaultDataRowTemplate let-columns="columns">
  <tr
    *ngFor="let row of filteredRows; trackBy: mergedConfig.trackBy;"
    [class]="mergedConfig.cssDataRow">
    <td
      *ngFor="let column of columns;"
      [ngClass]="[mergedConfig.cssDataCell, getCssDataCell(row, column)]"
      [style]="getColumnWidth(column)">
      <ng-container *ngTemplateOutlet="column.dataCellTemplate ? column.dataCellTemplate : defaultDataCellTemplate; context: {row: row, column: column}"></ng-container>
    </td>
  </tr>
</ng-template>

<ng-template #defaultFooterRowTemplate let-columns="columns">
</ng-template>

<ng-template #defaultHeadCellTemplate let-column="column">
  <span>{{column.title}}</span>
  <span [class]="getCssSortOrder(column)">{{getGlyphSortOrder(column)}}</span>
</ng-template>

<ng-template #defaultFilterCellTemplate let-column="column" let-filters="filters" let-applyFilter="applyFilter">
  <input
    [attr.aria-label]="column.title"
    [(ngModel)]="filters[column.prop]"
    (ngModelChange)="applyFilter()">
</ng-template>

<ng-template #defaultDataCellTemplate let-row="row" let-column="column">
  {{getCellValue(row, column)}}
</ng-template>
